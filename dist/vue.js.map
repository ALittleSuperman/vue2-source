{"version":3,"file":"vue.js","sources":["../src/observe/index.js","../src/state.js","../src/init.js","../src/index.js"],"sourcesContent":["\nclass Observe {\n    constructor(data) {\n        this.walk(data)\n    }\n\n    /**\n     * 循环对象,依次劫持\n     * @param data\n     */\n    walk(data) {\n        Object.keys(data).forEach(key => defineReactive(data, key, data[key]))\n    }\n}\n\n/**\n * 属性劫持\n * @param target 要劫持的目标\n * @param key 要劫持的key\n * @param value key的valve\n * @returns {*}\n */\nexport function defineReactive(target, key , value) {\n    observe(value) // 对所有属性都进行数据劫持,深度劫持\n    Object.defineProperty(target, key, {\n        get() {\n            return value\n        },\n        set(newVal) {\n            if (newVal === value) return\n            value = newVal\n        }\n    })\n}\n\nexport function observe(data) {\n    if (typeof data !== 'object' || data === null) return\n    // 如果已经被劫持过，那就不需要劫持了\n    return new Observe(data)\n}","import {observe} from \"./observe/index\";\n\nexport function initState(vm) {\n    const opts = vm.$options // 获取所有选项\n    if (opts.data) {\n        initData(vm)\n    }\n}\n\n// 代理\nfunction proxy(vm, target, key) {\n    Object.defineProperty(vm, key, {\n        get() {\n            return vm[target][key]\n        },\n        set(newVal) {\n            vm[target][key] = newVal\n        }\n    })\n}\n\nfunction initData(vm) {\n    let data = vm.$options.data\n    data = typeof data === 'function' ? data.call(vm) : data\n\n    vm._data = data\n    // 使用defineProperty 劫持数据\n    observe(data)\n\n    // vm代理vm._data方便取值\n   for(let key in data) {\n       proxy(vm, '_data', key)\n   }\n}\n","import {initState} from \"./state\";\n\n\nexport function initMixin(Vue) {\n    Vue.prototype._init = function (options) {\n        const vm = this\n        vm.$options = options // 挂载共享配置\n\n        // 初始化状态\n        initState(vm)\n    }\n}\n\n","import { initMixin } from \"./init\";\n\nfunction Vue(options) {\n    this._init(options)\n}\ninitMixin(Vue)\n\nexport default Vue"],"names":["Observe","data","walk","Object","keys","forEach","key","defineReactive","target","value","observe","defineProperty","get","set","newVal","initState","vm","opts","$options","initData","proxy","call","_data","initMixin","Vue","prototype","_init","options"],"mappings":"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"}