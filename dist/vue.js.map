{"version":3,"file":"vue.js","sources":["../src/observe/array.js","../src/observe/index.js","../src/state.js","../src/complie/index.js","../src/init.js","../src/index.js"],"sourcesContent":["// 重写数组中的部分函数\n\n// 获取数组的原型\nconst oldArrayProto = Array.prototype\n\n// 创建新原型，修改新原型函数，不会影响原生函数\nexport const newArrayProto = Object.create(oldArrayProto)\n\n// 以下函数会改变原数组\nconst method = [\n    \"push\",\n    \"pop\",\n    \"shift\",\n    \"unshift\",\n    \"revers\",\n    \"sort\",\n    \"splice\",\n]\n\nmethod.forEach(method => {\n    newArrayProto[method] = function (...args) {\n        // 重写数组的方法，内部调用原来的函数\n       const result = oldArrayProto[method].call(this, ...args)\n\n        // 保存修改数组的数据\n        let inserted\n        let ob = this.__ob__\n        switch (method) {\n            case \"push\":\n            case \"unshift\":\n                inserted = args\n                break\n            case \"spice\":\n                inserted = args.slice(2)\n        }\n        console.log(inserted)\n        if (inserted) {\n            // 将新数据进行劫持\n            ob.observeArray(inserted)\n        }\n        return result\n    }\n})\n\n\n","import {newArrayProto} from \"./array\";\n\nclass Observe {\n    constructor(data) {\n        // 添加属性偏于数据监听，并且如果数据上有__ob__属性说明已经被观测过\n        // 将__ob__设置成不可枚举，防止将大当成object循环劫持\n        Object.defineProperty(data, '__ob__', {\n            value: this,\n            enumerable: false\n        })\n        // 数组不使用劫持函数，因为数组的数量是不固定的，循环起来消耗性能\n        // 重写数组的7个修改数组本身的函数\n        if(Array.isArray(data)) {\n            // 对数组中的object数据类型进行劫持\n            data.__proto__ = newArrayProto\n            this.observeArray(data)\n        } else {\n            // 不是数组进行劫持\n            this.walk(data)\n        }\n    }\n\n    /**\n     * 循环对象,依次劫持\n     * @param data\n     */\n    walk(data) {\n        Object.keys(data).forEach(key => defineReactive(data, key, data[key]))\n    }\n\n    /**\n     * 劫持数组中的object类型数据\n     * @param data\n     */\n    observeArray(data) {\n        data.forEach(item => observe(item))\n    }\n}\n\n/**\n * 属性劫持\n * @param target 要劫持的目标\n * @param key 要劫持的key\n * @param value key的valve\n * @returns {*}\n */\nexport function defineReactive(target, key , value) {\n    observe(value) // 对所有属性都进行数据劫持,深度劫持\n    Object.defineProperty(target, key, {\n        get() {\n            return value\n        },\n        set(newVal) {\n            if (newVal === value) return\n            value = newVal\n        }\n    })\n}\n\nexport function observe(data) {\n    if (typeof data !== 'object' || data === null) return\n    // 如果已经被劫持过，那就不需要劫持了\n    if (data.__ob__ instanceof Observe) return data.__ob__\n    // 如果数据上有__ob__属性说明已经被劫持过\n    return new Observe(data)\n}","import {observe} from \"./observe\";\n\nexport function initState(vm) {\n    const opts = vm.$options // 获取所有选项\n    if (opts.data) {\n        initData(vm)\n    }\n}\n\n// 代理\nfunction proxy(vm, target, key) {\n    Object.defineProperty(vm, key, {\n        get() {\n            return vm[target][key]\n        },\n        set(newVal) {\n            vm[target][key] = newVal\n        }\n    })\n}\n\nfunction initData(vm) {\n    let data = vm.$options.data\n    data = typeof data === 'function' ? data.call(vm) : data\n\n    vm._data = data\n    // 使用defineProperty 劫持数据\n    observe(data)\n\n    // vm代理vm._data方便取值\n   for(let key in data) {\n       proxy(vm, '_data', key)\n   }\n}\n","const ncname = `[a-zA-Z_][\\\\-\\\\.0-9_a-zA-Z]*`\nconst qnameCapture = `((?:${ncname}\\\\:)?${ncname})`\n// 他匹配到的分组是一个 标签名  <xxx 匹配到的是开始标签的名字\nconst startTagOpen = new RegExp(`^<${qnameCapture}`)\n// 匹配的是</xxxx>  最终匹配到的分组就是结束标签的名字\nconst endTag = new RegExp(`^<\\\\/${qnameCapture}[^>]*>`)\n// 匹配属性\nconst attribute = /^\\s*([^\\s\"'<>\\/=]+)(?:\\s*(=)\\s*(?:\"([^\"]*)\"+|'([^']*)'+|([^\\s\"'=<>`]+)))?/\n// 第一个分组就是属性的key value 就是 分组3/分组4/分组五\nconst startTagClose = /^\\s*(\\/?)>/;  // <div> <br/>\n// vue3 采用的不是使用正则\n// 对模板进行编译处理\n\n/**\n * 解析html字符串\n * @description 每次解析返回返回未解析的生育字符串\n * @param template\n */\nfunction parseHTML(html) {\n    /**\n     * 枚举类型\n     */\n    const ELEMENT_TYPE = 1\n    const TEXT_TYPE = 3\n    /**\n     * 维护嵌套关系栈\n     * @type {*[]}\n     */\n    const stack = []\n    /**\n     * 维护当前父级,永远指向栈中最后一个元素\n     */\n    let currentParent = null\n\n    /**\n     * 根节点\n     */\n    let root = null\n    /**\n     * 转化ATS语法树\n     * @param tag\n     * @param attrs\n     */\n    function createASTElement(tag, attrs) {\n        return {\n            tag,\n            type: ELEMENT_TYPE,\n            children: [],\n            attrs,\n            parent: null\n        }\n    }\n    /**\n     * 开始标签\n     * @param {tag} 标签名\n     * @param {attrs} 属性\n     */\n    function start(tag, attrs) {\n        // 创造一个节点\n        let node = createASTElement(tag, attrs)\n        // 如果根节点为空\n        if(!root) {\n            // 当前节点为根节点\n            root = node\n        }\n        // 如果当前节点有父节点确定当前节点的父节点\n        if(currentParent) {\n            node.parent = currentParent\n            currentParent.children.push(node)\n        }\n        stack.push(node)\n        // 当前parent为栈中最后一个\n        currentParent = node\n    }\n    /**\n     * 文本标签\n     * @param {text} 文本\n     */\n    function chars(text) {\n        text = text.replace(/\\s/g, \"\")\n        // 文本直接放到当前指向的节点中\n        text && currentParent.children.push({\n            type: TEXT_TYPE,\n            text,\n            parent: currentParent\n        })\n    }\n    /**\n     * 结束标签\n     * @param {tag} 标签名\n     */\n    function end() {\n        // 遇到结束标签弹出最后一个节点\n        const node = stack.pop()\n        // 校验标签是否违法\n        // TODO: node\n        currentParent = stack[stack.length - 1] || null\n    }\n    /**\n     * 匹配完成后前进函数\n     * @description 匹配完成一次少一段代码，直到字符串为空\n     * @param n\n     */\n    function advance(n) {\n        html = html.substring(n)\n    }\n    /**\n     * 解析开始标签\n     * @description 生成对象\n     */\n    function parseStartTag() {\n        const start = html.match(startTagOpen)\n        if(start) {\n            const match = {\n                tagName: start[1], // 标签名\n                attrs: [] // 属性列表\n            }\n            advance(start[0].length)\n\n            // 如果不是开始标签的结束就一直匹配下去\n            let attr, end\n            while (!(end = html.match(startTagClose)) && (attr = html.match(attribute))) {\n                match.attrs.push({\n                    name: attr[1],\n                    value: attr[3] || attr[4] || attr[5] || true\n                })\n                advance(attr[0].length)\n            }\n            if (end) {\n                advance(end[0].length)\n            }\n            return match\n        }\n        return false\n    }\n    // html字符串以<开头\n    while (html) {\n        /*\n         * 如果textEnd为0，则说明是一个标签\n         * 如果textEnd大于0，则说明是文本结束位置\n         */\n        const textEnd = html.indexOf('<')\n        // 处理标签\n        if(textEnd === 0) {\n            // 解析开始标签\n            const startTagMatch = parseStartTag()\n            // 解析到文本标签\n            if(startTagMatch){\n                start(startTagMatch.tagName, startTagMatch.attrs)\n                continue\n            }\n\n            // 处理结束标签\n            const endTagMatch = html.match(endTag)\n            if (endTagMatch) {\n                advance(endTagMatch[0].length)\n                end(endTagMatch[1])\n                continue\n            }\n        }\n        // 处理文本\n        if(textEnd > 0) {\n            // 截取文本内容\n            const text = html.substring(0, textEnd)\n            if(text) {\n                chars(text)\n                advance(text.length)\n            }\n        }\n    }\n    console.log(root)\n}\n\n// 模版编译函数\nexport function compileToFunction(template) {\n    // 1。将template转换成ast语法树\n    const ast = parseHTML(template)\n    console.log(ast)\n    // 2。生成render函数（render函数执行后返回虚拟dom）\n\n    console.log(template)\n}","import {initState} from \"./state\";\nimport {compileToFunction} from \"./complie\";\n\n\nexport function initMixin(Vue) {\n    Vue.prototype._init = function (options) {\n        const vm = this\n        vm.$options = options // 挂载共享配置\n\n        // 初始化状态\n        initState(vm)\n\n        // 处理模版\n        if(options.el) {\n            vm.$mount(options.el)\n        }\n    }\n    Vue.prototype.$mount = function (el) {\n        const vm = this\n        el = document.querySelector(el)\n        const opts = vm.$options\n        // 先进行查找render\n        if (!opts.render) {\n            // 如果不存在render函数，查看有没有template参数\n            let template\n            if(!opts.template && el) {\n                // 没有template属性使用挂载容器内的模版\n                template = el.outerHTML\n            } else  {\n                if (el) {\n                    // 存在template属性就使用传入的template属性模版\n                    template = opts.template\n                }\n            }\n            if (template) {\n                // 编译模版\n                const render = compileToFunction(template)\n                opts.render = render\n            } else {\n                console.warn(\"没有模版信息\")\n            }\n        }\n        opts.render\n    }\n}\n\n","import { initMixin } from \"./init\";\n\nfunction Vue(options) {\n    this._init(options)\n}\ninitMixin(Vue)\n\nexport default Vue"],"names":["oldArrayProto","Array","prototype","newArrayProto","Object","create","method","forEach","args","result","call","inserted","ob","__ob__","slice","console","log","observeArray","Observe","data","defineProperty","value","enumerable","isArray","__proto__","walk","keys","key","defineReactive","item","observe","target","get","set","newVal","initState","vm","opts","$options","initData","proxy","_data","ncname","qnameCapture","startTagOpen","RegExp","endTag","attribute","startTagClose","parseHTML","html","ELEMENT_TYPE","TEXT_TYPE","stack","currentParent","root","createASTElement","tag","attrs","type","children","parent","start","node","push","chars","text","replace","end","pop","length","advance","n","substring","parseStartTag","match","tagName","attr","name","textEnd","indexOf","startTagMatch","endTagMatch","compileToFunction","template","ast","initMixin","Vue","_init","options","el","$mount","document","querySelector","render","outerHTML","warn"],"mappings":"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"}